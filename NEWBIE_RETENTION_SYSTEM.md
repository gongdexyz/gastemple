# 新手留存系统

## 功能概述
实现了一套完整的新手留存系统，通过"爽点 + 成就感 + 奖励"的低成本循环，让新手玩家在 0 充值状态下也能玩得很开心。

## 实现的功能

### 1. 欢迎弹窗（首次访问）
**触发时机**：用户第一次访问网站

**内容**：
- 🙏 欢迎标题 + 佛光特效
- 🎯 点击木鱼说明
- 💥 暴击系统介绍（10% 概率）
- 🎁 新手礼包：+100 $GONGDE

**效果**：
- 让新手立即了解游戏玩法
- 给予初始代币，降低门槛
- 建立"这个游戏会送东西"的第一印象

### 2. 每日登录奖励
**触发时机**：每天首次登录（基于日期判断）

**内容**：
- 🎁 每日福报弹窗
- +50 $GONGDE 奖励
- "佛祖今天心情很好"文案

**效果**：
- 建立"每天来一次"的习惯
- 持续提供免费代币
- 增加日留存率

### 3. 新手强制暴击
**触发时机**：前 10 次点击中的第 3 次和第 7 次

**机制**：
- 第 3 次点击：100% 触发暴击
- 第 7 次点击：100% 触发暴击
- 使用 localStorage 追踪点击次数

**效果**：
- 让新手立即体验到暴击的爽感
- "哇，这个游戏会爆金币！"
- 降低新手流失率

### 4. 功德里程碑庆祝
**触发时机**：达到 1000/5000/10000/50000/100000 功德

**内容**：
- 🎉 全屏庆祝动画 + 烟花特效
- 里程碑奖励：功德值 / 10 的 $GONGDE
  - 1000 功德 = 100 $GONGDE
  - 5000 功德 = 500 $GONGDE
  - 10000 功德 = 1000 $GONGDE
- "佛祖对你的进步非常满意"鼓励语

**效果**：
- 成就感爆棚
- 引导长期游玩
- 自然引导分享（未来可添加分享按钮）

## 技术实现

### 文件结构
```
src/components/NewbieRewards.tsx  - 新手奖励系统组件
src/components/WoodenFish.tsx     - 新手强制暴击逻辑
src/pages/TemplePage.tsx          - 集成 NewbieRewards 组件
```

### 状态管理
使用 `localStorage` 持久化以下数据：
- `hasVisited`: 是否首次访问
- `firstVisitDate`: 首次访问日期
- `lastDailyReward`: 上次领取每日奖励的日期
- `newbieClickCount`: 新手点击次数（0-10）
- `newbieCritTriggered`: 已触发的新手暴击次数（0-2）
- `lastMilestone`: 上次达成的里程碑

### 全局通信
通过 `window.checkMilestone` 函数实现跨组件通信：
- NewbieRewards 组件注册全局函数
- WoodenFish 组件调用检查里程碑

## 用户体验流程

### 新手第一次访问（前 3 分钟）
1. 打开网站 → 欢迎弹窗 → 获得 100 $GONGDE
2. 点击木鱼 3 次 → 强制暴击 → "哇，爆金币了！"
3. 继续点击 4 次 → 第 7 次再次暴击 → "又爆了！"
4. 达到 1000 功德 → 里程碑庆祝 → 获得 100 $GONGDE

**结果**：新手在前 3 分钟体验到 2 次暴击 + 1 次里程碑，获得 200+ $GONGDE

### 第二天访问
1. 打开网站 → 每日奖励弹窗 → 获得 50 $GONGDE
2. 继续游玩，正常暴击概率（10%）
3. 达到 5000 功德 → 里程碑庆祝 → 获得 500 $GONGDE

**结果**：建立"每天来领奖"的习惯

## 数据分析

### 新手留存预期
- **前 3 分钟留存**：从 30% 提升到 60%+
  - 强制暴击 + 欢迎礼包 = 即时爽感
- **次日留存**：从 10% 提升到 30%+
  - 每日奖励 + 里程碑期待
- **7 日留存**：从 5% 提升到 15%+
  - 持续的成就感 + 免费代币

### 成本分析
- **开发成本**：1 小时（已完成）
- **运营成本**：0（纯前端逻辑，无服务器成本）
- **代币成本**：模拟数据，无实际成本

## 未来优化方向

### 第二波功能（黑客松后 1 周）
1. **每日任务系统**
   - 签到 + 点击 10 次 = +200 功德
   - 连续登录 3 天 = 暴击率 +10% buff

2. **分享裂变**
   - 暴击后弹出分享按钮
   - 分享截图 = +50 功德

3. **排行榜互动**
   - "超越前一名只需再烧 200 $GONGDE"
   - 刺激继续游玩

### 第三波功能（长期优化）
1. **离线提醒**
   - Push 通知："佛祖在等你！"
2. **新手保护**
   - 前 3 天暴击率 +20%
3. **情绪价值**
   - 佛祖鼓励语音（TTS）

## 测试建议
1. 清除 localStorage，模拟新用户
2. 点击木鱼 10 次，验证第 3 次和第 7 次是否暴击
3. 达到 1000 功德，验证里程碑弹窗
4. 刷新页面，验证每日奖励（需要第二天测试）
5. 检查所有弹窗的双语支持

## 黑客松展示要点
- "新手 0 充值也能暴击 5000 GD + 免费冥想挂机"
- "前 10 次点击必爆 2 次，让你立即上瘾"
- "每日登录送 50 $GONGDE，佛祖保佑你不 rug"
- "达成里程碑全屏庆祝，成就感拉满"
