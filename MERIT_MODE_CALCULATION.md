# 功德模式代敲经济计算

## 📊 基础数据

### 代敲参数
- **档位 3**：108 SKR，5倍速
- **时长**：3小时 = 10,800 秒
- **总点击**：54,000 次

### 功德模式消耗
- **每次消耗**：100 GD
- **总消耗**：54,000 × 100 = **5,400,000 GD**

---

## 💰 收入计算

### 暴击收入（4% 暴击率）

#### 暴击次数
```
54,000 × 4% = 2,160 次暴击
```

#### 暴击奖励分布
```
因果级（72%）：2,160 × 72% = 1,555 次 × 1,200 GD = 1,866,000 GD
福报级（22%）：2,160 × 22% = 475 次 × 2,000 GD = 950,000 GD
天启级（6%）：2,160 × 6% = 130 次 × 5,000 GD = 650,000 GD

暴击总收入：3,466,000 GD
```

### 非暴击收入（96%）

#### 非暴击次数
```
54,000 × 96% = 51,840 次
```

#### 非暴击奖励分布
```
200 GD（12%）：51,840 × 12% = 6,221 次 × 200 GD = 1,244,200 GD
80 GD（50%）：51,840 × 50% = 25,920 次 × 80 GD = 2,073,600 GD
0 GD（38%）：51,840 × 38% = 19,699 次 × 0 GD = 0 GD

非暴击总收入：3,317,800 GD
```

### 总收入
```
暴击收入：3,466,000 GD
非暴击收入：3,317,800 GD
总收入：6,783,800 GD
```

---

## 💸 盈亏分析

### 用户视角
```
收入：6,783,800 GD
成本：5,400,000 GD（消耗）+ 108 SKR（支付）
净收益：1,383,800 GD - 108 SKR
```

### 你的视角（假设 1 SKR = 100 GD 市场价值）

#### 收入
```
108 SKR = 10,800 GD（市场价值）
```

#### 成本
```
发放 GD：6,783,800 GD
回收 GD：5,400,000 GD（用户消耗）
净成本：1,383,800 GD = 13,838 SKR（市场价值）
```

#### 盈亏
```
收入：10,800 GD（108 SKR）
成本：13,838 SKR
亏损：-3,038 SKR（-28%）❌
```

---

## 🚨 问题分析

### 如果允许功德模式代敲，你会严重亏损！

**原因：**
1. 暴击奖励太高（1,200-5,000 GD）
2. 非暴击也有奖励（80-200 GD）
3. 用户净赚 1,383,800 GD
4. 你需要发放的 GD 远超 SKR 收入

---

## 💡 解决方案

### 方案 A：功德模式代敲大幅降低奖励（推荐）

#### 调整参数
```typescript
// 代敲时的暴击奖励（除以倍率）
if (isAutoClicking) {
  // 因果级：1,200 / 5 = 240 GD
  // 福报级：2,000 / 5 = 400 GD
  // 天启级：5,000 / 5 = 1,000 GD
  
  // 非暴击奖励也降低
  // 200 / 5 = 40 GD
  // 80 / 5 = 16 GD
}
```

#### 重新计算
```
暴击收入：3,466,000 / 5 = 693,200 GD
非暴击收入：3,317,800 / 5 = 663,560 GD
总收入：1,356,760 GD

净成本：1,356,760 - 5,400,000 = -4,043,240 GD
用户亏损：4,043,240 GD ❌（用户不会用）
```

### 方案 B：功德模式代敲提高价格

#### 调整价格
```typescript
// 功德模式价格 = 冥想模式价格 × 10
const AUTO_CLICK_OPTIONS_MERIT = [
  { price: 330, multiplier: 1 },   // 330 SKR
  { price: 580, multiplier: 3 },   // 580 SKR
  { price: 1080, multiplier: 5 }   // 1080 SKR
]
```

#### 重新计算（档位 3）
```
收入：1080 SKR = 108,000 GD
成本：13,838 SKR
盈亏：108,000 - 13,838 = 94,162 GD ✅（87% 利润率）
```

### 方案 C：功德模式代敲禁用暴击

#### 调整逻辑
```typescript
// 代敲时禁用暴击
if (isAutoClicking) {
  const isCriticalHit = false  // 强制不暴击
}
```

#### 重新计算
```
只有非暴击收入：3,317,800 GD
净成本：3,317,800 - 5,400,000 = -2,082,200 GD
用户亏损：2,082,200 GD ❌（用户不会用）
```

### 方案 D：功德模式代敲降低暴击率 + 降低奖励（平衡方案）

#### 调整参数
```typescript
if (isAutoClicking) {
  // 暴击率从 4% 降到 1%
  const baseCritRate = 0.01
  
  // 暴击奖励除以 3
  // 因果级：1,200 / 3 = 400 GD
  // 福报级：2,000 / 3 = 667 GD
  // 天启级：5,000 / 3 = 1,667 GD
  
  // 非暴击奖励除以 2
  // 200 / 2 = 100 GD
  // 80 / 2 = 40 GD
}
```

#### 重新计算
```
暴击次数：54,000 × 1% = 540 次
暴击收入：540 × 平均500 GD = 270,000 GD

非暴击次数：53,460 次
非暴击收入：53,460 × 平均50 GD = 2,673,000 GD

总收入：2,943,000 GD
净成本：2,943,000 - 5,400,000 = -2,457,000 GD
用户亏损：2,457,000 GD ❌（用户不会用）
```

---

## 🎯 推荐方案：方案 B + 微调

### 最终方案
```typescript
// 功德模式代敲价格（比冥想模式贵 5 倍）
const AUTO_CLICK_OPTIONS_MERIT = [
  { price: 165, multiplier: 1 },   // 165 SKR
  { price: 290, multiplier: 3 },   // 290 SKR
  { price: 540, multiplier: 5 }    // 540 SKR
]

// 暴击奖励降低 30%
if (isAutoClicking && gameMode === 'merit') {
  gdReward = Math.floor(gdReward * 0.7)
}
```

### 重新计算（档位 3）
```
收入：540 SKR = 54,000 GD
成本：(6,783,800 × 0.7) - 5,400,000 = -648,340 GD = 6,483 SKR
盈亏：54,000 - 6,483 = 47,517 GD ✅（88% 利润率）

用户视角：
收入：(6,783,800 × 0.7) = 4,748,660 GD
成本：5,400,000 GD + 540 SKR
净亏损：651,340 GD + 540 SKR
但是省时间！
```

---

## 📋 实现清单

1. ✅ 移除"禁止功德模式代敲"的限制
2. ✅ 添加功德模式专用价格（5倍）
3. ✅ 代敲时降低暴击奖励（70%）
4. ✅ 代敲时降低非暴击奖励（70%）
5. ✅ 更新经济计算器显示两种模式
6. ✅ 添加模式切换提示

---

## 💰 最终经济模型

### 冥想模式代敲（便宜，低产出）
```
档位 1：33 SKR → 216 GD → 93.5% 利润率 ✅
档位 2：58 SKR → 648 GD → 88.8% 利润率 ✅
档位 3：108 SKR → 1,080 GD → 90.0% 利润率 ✅
```

### 功德模式代敲（贵，高产出）
```
档位 1：165 SKR → 净成本 1,297 SKR → 88% 利润率 ✅
档位 2：290 SKR → 净成本 3,890 SKR → 87% 利润率 ✅
档位 3：540 SKR → 净成本 6,483 SKR → 88% 利润率 ✅
```

**所有档位都有 87%+ 利润率！你不会亏本！** ✅
