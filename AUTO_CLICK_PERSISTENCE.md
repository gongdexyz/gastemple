# 自动挂机状态持久化功能

## 功能概述
自动挂机状态现在会自动保存到浏览器本地存储（localStorage），即使用户切换标签页、刷新页面或关闭浏览器后重新打开，挂机状态也会自动恢复。

## 实现细节

### 1. 状态持久化
- 使用 `localStorage` 保存以下状态：
  - `autoClickMultiplier`: 挂机倍率（1x, 3x, 5x）
  - `autoClickEndTime`: 挂机结束时间戳
- 每次状态变化时自动保存
- 过期后自动清除 localStorage

### 2. 自动恢复机制
- 页面加载时检查 localStorage
- 如果还在有效期内（3小时），自动恢复挂机状态
- 如果已过期，清除保存的状态

### 3. 离开页面提醒（弹窗）
当用户正在自动挂机时尝试离开木鱼页面，会弹出全屏提醒弹窗：

#### 弹窗内容：
- ⚠️ 标题：自动挂机进行中
- ✅ 状态已保存，返回时会自动恢复
- ⏰ 从启动时起有效期 3 小时
- 💡 建议：保持页面打开以获得最佳体验和最大收益

#### 用户选择：
- **留在这里**：取消导航，返回木鱼页面继续挂机
- **仍然离开**：确认离开，状态会保存但收益可能受影响

### 4. 游戏模式锁定
**重要**：代敲开启后，游戏模式（冥想/功德）会被锁定，不能切换：
- 模式切换按钮变为禁用状态（半透明 + 不可点击）
- 显示锁定提示：🔒 挂机期间模式已锁定
- 防止用户在挂机期间误操作切换模式
- 挂机结束后自动解锁

### 5. 双语支持
- 中文：完整的中文提示文案
- 英文：对应的英文翻译

## 用户体验改进
1. **防止意外损失**：用户不小心切出页面后，挂机状态不会丢失
2. **主动提醒**：通过弹窗明确告知用户挂机状态和建议
3. **自由选择**：用户可以选择留下或离开，不强制
4. **透明化**：明确告知状态保留有效期和最佳实践
5. **模式锁定**：防止挂机期间误切换模式导致收益异常

## 技术实现
- 文件：
  - `src/App.tsx` - 路由监听和弹窗逻辑
  - `src/components/WoodenFish.tsx` - 状态持久化 + 模式锁定
- 使用 React Hooks：`useState`, `useEffect`
- 路由监听：`useLocation`, `useNavigate`
- 存储方式：`localStorage`
- 过期检查：每 30 秒检查一次是否过期
- UI 动画：`framer-motion` 的 `AnimatePresence`

## 测试建议
1. 启动自动挂机（功德模式）
2. 尝试切换到冥想模式 - 应该被禁用
3. 点击导航栏其他页面（如抽卡、排行榜）
4. 验证弹窗是否正确显示
5. 点击"留在这里"，验证是否返回木鱼页面且保持功德模式
6. 再次尝试离开，点击"仍然离开"
7. 返回木鱼页面，验证挂机状态是否正确恢复且模式仍然锁定
8. 等待挂机结束，验证模式切换按钮是否自动解锁
